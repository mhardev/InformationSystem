$("#btnUpdate_checksE5").click(function(e)
{
    e.preventDefault();
    $(".error-message").remove();

    let isValid = true;

    $(".required-field").each(function() {
        let elementType = $(this).prop("tagName").toLowerCase();
        let value = $(this).val();

        if (elementType === "select" && (value === "" || value === null)) {
            isValid = false;
            $(this).closest(".input-group.mb-1").after('<span class="error-message" style="color:red; font-size:12px;">This field is required</span>');
        } else if ((elementType === "input") && $.trim(value) === "") {
            isValid = false;
            $(this).closest(".input-group.mb-1").after('<span class="error-message" style="color:red; font-size:12px;">This field is required</span>');
        }
    });

    if ($('#add_member_type').val() === "1") {
        let subjectRows = $('#add_subject_taught tr');
        if (subjectRows.length === 0) {
            isValid = false;
            $('#subjectTaughtContainer').after('<span class="error-message" style="color:red; font-size:12px;">At least one subject</span>');
        } else {
            subjectRows.each(function() {
                let subjectInput = $(this).find('.subject').val();
                let unitInput = $(this).find('.unit').val();
                if ($.trim(subjectInput) === "" || $.trim(unitInput) === "") {
                    isValid = false;
                    $(this).closest('#subjectTaughtContainer').after('<span class="error-message" style="color:red; font-size:12px;">Both subject and unit are required.</span>');
                }
            });
        }
    }

    if (isValid) {
        var data = {
            id: $("#id").val(),
            last_name: $("#add_last_name").val(),
            first_name: $("#add_first_name").val(),
            middle_initial: $("#add_middle_initial").val(),
            member_type: $("#add_member_type").val(),
            ftpt_ID: $("#add_fulltime_parttime").val(),
            gender: $("#add_gender").val(),
            hda_ID: $("#add_highest_degree_attained").val(),
            programcode_ID_1: $("#add_primary_teaching_discipline").val(),
            programcode_ID_2: $("#add_bachelors_degree").val(),
            programcode_ID_3: $("#add_masters_degree").val(),
            programcode_ID_4: $("#add_doctorate").val(),
            pl_ID: $("#add_prof_license").val(),
            tenure: $("#add_tenure").val(),
            fr_ID: $("#add_faculty_rank").val(),
            tl_ID: $("#add_teaching_load").val(),
            subject_taught: $('#subject_taught').val(),
            as_ID: $("#add_annual_salary").val()
        };

        $.ajax({
            type: 'POST',
            url: '/update-checks-e5',
            data: data,
            headers: {
                'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
            },
            dataType: 'JSON',
            success: function(data) {
                if (data.success) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Updated!',
                        text: 'Faculty Member was successfully updated.',
                        confirmButtonColor: "#08BDE1",
                        confirmButtonText: 'Okay'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            window.location.href = "{{route('checks-e5')}}";
                        }
                    });
                }
            },
            error: function(response) {
                Swal.fire({
                    icon: 'error',
                    title: 'Error!',
                    text: 'An error occurred while updating. Please try again.',
                    confirmButtonColor: "#e74c43",
                    confirmButtonText: 'Okay'
                });
            }
        });
    }
});









<!-- Adding a Faculty Member -->
<div class="modal fade" id="AddModal" tabindex="-1" aria-labelledby="AddModalLabel">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="AddModalLabel">Add Faculty Member</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form class="needs-validation" id="formAddFaculty" method="POST" novalidate>
                <div class="modal-body">
                    @csrf
                    <div class="col-xl-auto">
                        <div class="nav-align-top mb-4">
                            <ul class="nav nav-pills mb-4" role="tablist">
                                <li class="nav-item">
                                    <button
                                    type="button"
                                    class="nav-link active"
                                    role="tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#navs-top-profile"
                                    aria-controls="navs-top-profile"
                                    aria-selected="true">
                                    Faculty Profile
                                    </button>
                                </li>
                                <li class="nav-item">
                                    <button
                                    type="button"
                                    class="nav-link"
                                    role="tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#navs-top-educational_background"
                                    aria-controls="navs-top-educational_background"
                                    aria-selected="true">
                                    Educational Background
                                    </button>
                                </li>
                                <li class="nav-item">
                                    <button
                                    type="button"
                                    class="nav-link"
                                    role="tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#navs-top-subject_taught"
                                    aria-controls="navs-top-subject_taught"
                                    aria-selected="true">
                                    Subject Taught
                                    </button>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane fade show active" id="navs-top-profile" role="tabpanel">
                                    <input type="hidden" id="id" name="id">
                                    <!-- Name of Faculty -->
                                    <div class="row">
                                        <label class="mb-3" for="form-label">Name of Faculty Member&nbsp;<span><i>(Last Name, First Name Middle Initial)</i></span></label>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_last_name">Last Name</label>
                                                <div class="input-group mb-1">
                                                    <input oninput="this.value = this.value.toUpperCase()" type="text"
                                                            class="form-control @error('last_name') is-invalid @enderror"
                                                            id="add_last_name" name="last_name"
                                                            placeholder="DELA CRUZ" required>
                                                </div>
                                                @error('last_name')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_first_name">First Name</label>
                                                <div class="input-group mb-1">
                                                    <input oninput="this.value = this.value.toUpperCase()" type="text"
                                                            class="form-control @error('first_name') is-invalid @enderror"
                                                            id="add_first_name" name="first_name"
                                                            placeholder="JUAN" required>
                                                </div>
                                                @error('first_name')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_middle_initial">Middle Initial</label>
                                                <div class="input-group mb-1">
                                                    <input oninput="this.value = this.value.toUpperCase()" type="text"
                                                            class="form-control @error('middle_initial') is-invalid @enderror"
                                                            id="add_middle_initial" name="middle_initial"
                                                            placeholder="V" required>
                                                </div>
                                                @error('middle_initial')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Type of Employment -->
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_member_type">Member Type</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select" id="add_member_type" name="member_type" required>
                                                        <option selected="true" disabled="disabled">Select Member Type</option>
                                                        <option value="0">None</option>
                                                        <option value="1">Faculty</option>
                                                        <option value="2">Non Faculty</option>
                                                    </select>
                                                </div>
                                                @error('member_type')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_fulltime_parttime">Type of Employment</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select" id="add_fulltime_parttime" name="ftpt_ID" required>
                                                        <option selected="true" disabled="disabled">Select Type of Employment</option>
                                                        @foreach ($ft_pt as $ftpt_code)
                                                            <option value="{{$ftpt_code->ID}}">{{$ftpt_code->description}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                                @error('ftpt_ID')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_gender">Gender</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select" id="add_gender" name="gender" required>
                                                        <option selected="true" disabled="disabled">Select Gender</option>
                                                        <option value="1">Male</option>
                                                        <option value="2">Female</option>
                                                    </select>
                                                </div>
                                                @error('gender')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                        <!-- Primary Teaching Discipline -->
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_primary_teaching_discipline">Primary Teaching Discipline</label>
                                                <div class="input-group">
                                                    <select class="form-select" id="add_primary_teaching_discipline" name="programcode_ID_1">
                                                        <option selected="true" disabled="disabled">Select Degree</option>
                                                        @foreach ($program_with_code as $program_code)
                                                        <option value="{{$program_code->ID}}">{{$program_code->Program}}&nbsp;{{$program_code->Major}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                                @error('programcode_ID_1')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="navs-top-educational_background" role="tabpanel">
                                    <div class="row">
                                        <label class="mb-3" for="form-label">Educational Credential Earned</label>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_highest_degree_attained">Highest Degree Attained</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select" id="add_highest_degree_attained" name="hda_ID" required>
                                                        <option selected="true" disabled="disabled">Select Highest Degree Attained</option>
                                                        @foreach ($highest_degree_attained as $hda_code)
                                                        <option value="{{$hda_code->ID}}">{{$hda_code->description}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                                @error('hda_ID')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_bachelors_degree">Bachelor's Degree</label>
                                                <div class="input-group">
                                                    <select class="form-select" id="add_bachelors_degree" name="programcode_ID_2">
                                                        <option selected="true" disabled="disabled">Select Degree</option>
                                                        @foreach ($program_with_code as $program_code)
                                                        <option value="{{$program_code->ID}}">{{$program_code->Program}}&nbsp;{{$program_code->Major}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                                @error('programcode_ID_2')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_masters_degree">Master's Degree</label>
                                                <div class="input-group">
                                                    <select class="form-select" id="add_masters_degree" name="programcode_ID_3">
                                                        <option selected="true" disabled="disabled">Select Degree</option>
                                                        @foreach ($program_with_code as $program_code)
                                                        <option value="{{$program_code->ID}}">{{$program_code->Program}}&nbsp;{{$program_code->Major}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                                @error('programcode_ID_3')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_doctorate">Doctorate</label>
                                                <div class="input-group">
                                                    <select class="form-select" id="add_doctorate" name="programcode_ID_4">
                                                        <option selected="true" disabled="disabled">Select Degree</option>
                                                        @foreach ($program_with_code as $program_code)
                                                        <option value="{{$program_code->ID}}">{{$program_code->Program}}&nbsp;{{$program_code->Major}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                                @error('programcode_ID_4')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="navs-top-subject_taught" role="tabpanel">
                                    <div class="row">
                                        <div class="col mb-3">
                                            <label class="form-label" for="add_prof_license">Professional License</label>
                                            <div class="input-group mb-1">
                                                <select class="form-select" id="add_prof_license" name="pl_ID" required>
                                                    <option selected="true" disabled="disabled">Select Professional License</option>
                                                    @foreach ($prof_license as $pl_code)
                                                        <option value="{{$pl_code->ID}}">{{$pl_code->description}}</option>
                                                    @endforeach
                                                </select>
                                            </div>
                                            @error('pl_ID')
                                                <span class="invalid-feedback" role="alert">
                                                    <strong>{{ $message }}</strong>
                                                </span>
                                            @enderror
                                        </div>
                                        <div class="col mb-3">
                                            <label class="form-label" for="add_tenure">Tenure of Employment</label>
                                            <div class="input-group">
                                                <select class="form-select" id="add_tenure" name="tenure" required>
                                                    <option selected="true" disabled="disabled">Select Tenure</option>
                                                    <option value="1">Permanent</option>
                                                    <option value="2">Probationary</option>
                                                    <option value="3">Casual</option>
                                                    <option value="4">Contractual</option>
                                                </select>
                                            </div>
                                            @error('tenure')
                                                <span class="invalid-feedback" role="alert">
                                                    <strong>{{ $message }}</strong>
                                                </span>
                                            @enderror
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_faculty_rank">Faculty Rank</label>
                                                <div class="input-group">
                                                    <select class="form-select" id="add_faculty_rank" name="fr_ID" required>
                                                        <option selected="true" disabled="disabled">Select Faculty Rank</option>
                                                        @foreach ($faculty_rank as $fr_code)
                                                            <option value="{{$fr_code->ID}}">{{$fr_code->description}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                                @error('fr_ID')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_teaching_load">Teaching Load</label>
                                                <div class="input-group">
                                                    <select name="tl_ID" id="add_teaching_load" class="form-select" required>
                                                        <option selected="true" disabled="disabled">Select Teaching Load</option>
                                                        @foreach ($teaching_load as $tl_code)
                                                            <option value="{{$tl_code->ID}}">{{$tl_code->description}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                                @error('tl_ID')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_subject_taught">Subject Taught</label>
                                                <div class="input-group">
                                                    <textarea name="subject_taught" id="add_subject_taught" placeholder="Enter subject taught"></textarea>
                                                    <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal"
                                                    data-bs-target="#AddSubjectModal"><i class="ri-edit-2-line" style="font-size: 14px"></i></button>
                                                </div>
                                                @error('subject_taught')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_annual_salary">Annual Salary</label>
                                                <div class="input-group">
                                                    <select name="as_ID" id="add_annual_salary" class="form-select" required>
                                                        <option selected="true" disabled="disabled">Select Annual Salary</option>
                                                        @foreach ($annual_salary as $as_code)
                                                            <option value="{{$as_code->ID}}">{{$as_code->description}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                                @error('as_ID')
                                                    <span class="invalid-feedback" role="alert">
                                                        <strong>{{ $message }}</strong>
                                                    </span>
                                                @enderror
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Submit Button -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" id="btnSubmit_checksE5">Submit</button>
                    <button id="btnUpdate_checksE5" type="submit" class="btn btn-primary">Update changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Adding Subject Taught Lists-->
<div class="modal fade" id="AddSubjectModal" tabindex="-1" aria-labelledby="AddSubjectLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="AddSubjectLabel">Subject Taught</h5>
                <button type="button" class="btn-close" data-bs-target="#AddModal" data-bs-toggle="modal"></button>
            </div>
            <div class="modal-body">
                <input type="text" name="" id="">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Subject Taught</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>English</td>
                            <td>
                                <div class="d-flex">
                                    <button type="button" id="btnEdit"
                                        class="btn btn-primary btn-sm edit-form" data-bs-toggle="modal"
                                        data-bs-target="#AddModal">
                                        <i class="ri-edit-2-line" style="font-size: 14px"></i>
                                    </button>
                                    <button type="button" id="btnDelete"
                                        class="btn btn-danger btn-sm delete-form">
                                        <i class="ri-delete-bin-5-line" style="font-size: 14px"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Science</td>
                            <td>
                                <div class="d-flex">
                                    <button type="button" id="btnEdit"
                                        class="btn btn-primary btn-sm edit-form" data-bs-toggle="modal"
                                        data-bs-target="#AddModal">
                                        <i class="ri-edit-2-line" style="font-size: 14px"></i>
                                    </button>
                                    <button type="button" id="btnDelete"
                                        class="btn btn-danger btn-sm delete-form">
                                        <i class="ri-delete-bin-5-line" style="font-size: 14px"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Math</td>
                            <td>
                                <div class="d-flex">
                                    <button type="button" id="btnEdit"
                                        class="btn btn-primary btn-sm edit-form" data-bs-toggle="modal"
                                        data-bs-target="#AddModal">
                                        <i class="ri-edit-2-line" style="font-size: 14px"></i>
                                    </button>
                                    <button type="button" id="btnDelete"
                                        class="btn btn-danger btn-sm delete-form">
                                        <i class="ri-delete-bin-5-line" style="font-size: 14px"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" data-bs-target="#AddModal" data-bs-toggle="modal">Save</button>
            </div>
        </div>
    </div>
</div>

<!-- Just a bit of CSS styling -->
<style>
  table, td, th {border: 1px solid black; border-collapse: collapse;}
</style>

<div class="banner-info" align="center">
    <span><label>Customer Name </label></span>
    <span><input id="inputCustomerName" type="text" class="text-center" required="" placeholder="Enter Customer Name"></span><br>
</div>
<div class="logo">
    <input type="button" onClick="insertData()" value="Add entry">
</div>
<script language="javascript">
    function insertData() {
        var name = document.getElementById("inputCustomerName").value;
        document.getElementById("insertionPoint").innerHTML += "<tr><td>" + name + "</td></tr>";

        // The below part is to clear the values after the entry is added.
        document.getElementById("inputCustomerName").value = "";
    }
</script>
<table id="t1">
    <caption>Customer Table</caption>
    <colgroup>
        <col span="2" class="c2">
        <col>
        <col class="c1">
    </colgroup>
    <thead>
        <tr>
            <th>Customer Name</th>
        </tr>
    </thead>
    <tbody id="insertionPoint">

    </tbody>
</table>

<div class="card">
<div class="card-body">
    <h5 class="card-title">Pagination with icon</h5>

    <!-- Pagination with icons -->
    <nav aria-label="Page navigation example">
    <ul class="pagination">
        <li class="page-item">
        <a class="page-link" href="#" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
        </a>
        </li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item">
        <a class="page-link" href="#" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
        </a>
        </li>
    </ul>
    </nav><!-- End Pagination with icons -->
</div>
</div>

<!-- Validation -->

<body>

    <div id="login">

        <h2>
            <span class="fontawesome-lock"></span>Sign In
        </h2>

        <form action="login" method="POST">
            <fieldset>
                <p>
                    <label for="email">E-mail address</label>
                </p>
                <p>
                    <input type="email" id="email" name="email">
                </p>
                <p>
                    <label for="password">Password</label>
                </p>
                <p>
                    <input type="password" name="password" id="password">
                </p>
                <p>
                    <input type="submit" value="Sign In">
                </p>

            </fieldset>

        </form>

    </div>
    <!-- end login -->

</body>

<script>
    $(document).ready(function() {
        $('form').on('submit', function (e) {
    var focusSet = false;
    if (!$('#email').val()) {
        if ($("#email").parent().next(".validation").length == 0) // only add if not added
        {
            $("#email").parent().after("<div class='validation' style='color:red;margin-bottom: 20px;'>Please enter email address</div>");
        }
        e.preventDefault(); // prevent form from POST to server
        $('#email').focus();
        focusSet = true;
    } else {
        $("#email").parent().next(".validation").remove(); // remove it
    }
    if (!$('#password').val()) {
        if ($("#password").parent().next(".validation").length == 0) // only add if not added
        {
            $("#password").parent().after("<div class='validation' style='color:red;margin-bottom: 20px;'>Please enter password</div>");
        }
        e.preventDefault(); // prevent form from POST to server
        if (!focusSet) {
            $("#password").focus();
        }
    } else {
        $("#password").parent().next(".validation").remove(); // remove it
    }
});
    });

</script>


<!-- EDIT subject taught -->
<div class="modal fade" id="EditSubjectModal" tabindex="-1" aria-labelledby="EditSubjectLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="EditSubjectLabel">Edit Subject Taught</h5>
                <button type="button" class="btn-close" data-bs-target="#AddSubjectModal" data-bs-toggle="modal"></button>
            </div>
            <div class="modal-body">
                <div class="d-flex flex-row">
                    <input type="text" id="subjectTaught" placeholder="Enter subject taught" class="form-control me-2 required-field" required>
                    <input type="button" class="btn btn-outline-primary me-2" onClick="" value="Add Entry">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" data-bs-target="#AddSubjectModal" data-bs-toggle="modal">Save</button>
            </div>
        </div>
    </div>
</div>

<!-- Adding Subject Taught Lists-->
<div class="modal fade" id="AddSubjectModal" tabindex="-1" aria-labelledby="AddSubjectLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="AddSubjectLabel">Subject Taught</h5>
                <button type="button" class="btn-close" data-bs-target="#AddModal" data-bs-toggle="modal"></button>
            </div>
            <div class="modal-body">
                <div class="d-flex flex-row">
                    <input type="text" id="subjectTaught" placeholder="Enter subject taught" class="form-control me-2" required>
                    <input type="button" class="btn btn-outline-primary me-2" onClick="insertData()" value="Add Entry">
                </div>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Subject Taught</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="insertionPoint">

                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" data-bs-target="#AddModal" data-bs-toggle="modal">Save</button>
            </div>
        </div>
    </div>
</div>

<script>
    //SAVE subject taught
    function insertData()
    {
        var subject_taught = document.getElementById("subjectTaught").value;

        document.getElementById("insertionPoint").innerHTML += "<tr><td>" + subject_taught + "</td><td>" +
            "<button type='button' id='btnDelete' class='btn btn-danger btn-sm delete-form' data-bs-toggle='modal' data-bs-target='#EditSubjectModal'><i class='ri-delete-bin-5-line' style='font-size: 14px'></i></button>" +
            "</td></tr>";

        document.getElementById("subjectTaught").value = "";
    }
</script>

















<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
    <head>
        <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="csrf-token" content="{{ csrf_token() }}">
  		<meta content="width=device-width, initial-scale=1.0" name="viewport">
		<!-- <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> -->

        <title>CSFGAS</title>

		<!-- Favicons -->
		<!-- <link href="{{ URL::asset('public/assets/img/favicon.png') }}" rel="icon">
		<link href="{{ URL::asset('public/assets/img/apple-touch-icon.png') }}" rel="apple-touch-icon"> -->

		<!-- Google Fonts -->
		<link href="https://fonts.gstatic.com" rel="preconnect">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

        <!-- Google Icons -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

        <!-- Vendor CSS Files -->
		<link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
		<link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
		<link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
		<link href="assets/vendor/quill/quill.snow.css" rel="stylesheet">
		<link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet">
		<link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
		<link href="assets/vendor/simple-datatables/style.css" rel="stylesheet">
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

		<!-- Template Main CSS File -->
		<link href="assets/css/style.css" rel="stylesheet">

		<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

		<style type="text/css">
			label.error {
				margin-top: 10px;
				color: red;
				font-size: 15px;
				font-weight: bold;
			}

			label.error:before {
				content: '* ';
				color: red;
			}

			input.error, select.error {
				border: 2px solid red;
			}
		</style>

    </head>
    <script type="text/javascript">
		var APP_URL = {!! json_encode(url('/')) !!}

//Script for CHECKS E5
$(document).ready(function()
{
    //Pagination and Search function
    function fetchData(page, search = '') {
        $.ajax({
            url: "{{ route('checks-e5') }}",
            type: "GET",
            data: { page: page, search: search },
            success: function(response) {
                // Render table rows
                var rows = '';
                $.each(response.data, function(index, checks) {
                    rows += '<tr>';
                    rows += '<td style="display:none;">' + checks.ID + '</td>';
                    rows += '<th scope="row">' + (index + 1 + (page - 1) * 5) + '</th>'; // Adjust for pagination
                    rows += '<td>' + checks.full_name + '</td>';
                    rows += '<td>' + checks.ftpt_code + '</td>';
                    rows += '<td>' + checks.gender + '</td>';
                    rows += '<td>' + checks.hda_code + '</td>';
                    rows += '<td>' + checks.ptd_code + '</td>';
                    rows += '<td>' +
                                '<div class="d-flex">' +
                                    '<button type="button" class="btn btn-primary btn-sm edit-form" data-bs-toggle="modal" data-bs-target="#AddModal">' +
                                        '<i class="ri-edit-2-line" style="font-size: 14px"></i>' +
                                    '</button>' +
                                    '<button type="button" class="btn btn-danger btn-sm delete-form">' +
                                        '<i class="ri-delete-bin-5-line" style="font-size: 14px"></i>' +
                                    '</button>' +
                                '</div>' +
                             '</td>';
                    rows += '</tr>';
                });
                $('#checks-e5-table tbody').html(rows);
                updatePagination(response.total, response.per_page, response.current_page);
            },
            error: function(xhr) {
                console.error('Error fetching data:', xhr);
            }
        });
    }

    // Fetch data on search input
    $('#search').on('input', function() {
        var search = $(this).val();
        fetchData(1, search); // Reset to page 1
    });

    function updatePagination(total, perPage, currentPage) {
        var paginationHtml = '';
        var totalPages = Math.ceil(total / perPage);
        for (var i = 1; i <= totalPages; i++) {
            paginationHtml += '<li class="page-item' + (i === currentPage ? ' active' : '') + '"><a class="page-link" href="#" data-page="' + i + '">' + i + '</a></li>';
        }
        $('#pagination').html(paginationHtml);
    }

    // Initial fetch
    fetchData(1);

    $(".close-faculty-modal").click(function () {
        $('#formAddFaculty')[0].reset();  // Clear the form inputs
        clearSubjects();  // Call the function to clear subjects
    });

    $('#btnAdd').ready(function() //ADD open Modal
    {
        $('#AddModal').modal();
        $('#btnSubmit_checksE5').show();
        $('#btnUpdate_checksE5').hide();
    });

    $("#AddModal").on("hidden.bs.modal", function()
    {
        $('#btnSubmit_checksE5').show();
        $('#btnUpdate_checksE5').hide();
        $('#AddModalLabel').text('Add Faculty Member');
    });

    $(".required-field").on("input change", function()
    {
        $(this).closest(".input-group.mb-1").next(".error-message").remove();
    });

    $("#btnSubmit_checksE5").click(function(e) //ADD faculty member
    {
        e.preventDefault();

        $(".error-message").remove();

        let isValid = true;

        $(".required-field").each(function() {
            let elementType = $(this).prop("tagName").toLowerCase();
            let value = $(this).val();

            if (elementType === "select" && (value === "" || value === null)) {
                isValid = false;
                $(this).closest(".input-group.mb-1").after('<span class="error-message" style="color:red; font-size:12px;">This field is required</span>');
            }
            else if ((elementType === "input" || elementType === "textarea") && $.trim(value) === "") {
                isValid = false;
                $(this).closest(".input-group.mb-1").after('<span class="error-message" style="color:red; font-size:12px;">This field is required</span>');
            }
        });

        if (isValid) {
            var data = {
                last_name: $("#add_last_name").val(),
                first_name: $("#add_first_name").val(),
                middle_initial: $("#add_middle_initial").val(),
                member_type: $("#add_member_type").val(),
                ftpt_ID: $("#add_fulltime_parttime").val(),
                gender: $("#add_gender").val(),
                hda_ID: $("#add_highest_degree_attained").val(),
                programcode_ID_1: $("#add_primary_teaching_discipline").val(),
                programcode_ID_2: $("#add_bachelors_degree").val(),
                programcode_ID_3: $("#add_masters_degree").val(),
                programcode_ID_4: $("#add_doctorate").val(),
                pl_ID: $("#add_prof_license").val(),
                tenure: $("#add_tenure").val(),
                fr_ID: $("#add_faculty_rank").val(),
                tl_ID: $("#add_teaching_load").val(),
                subject_taught: $("#add_subject_taught").val(),
                as_ID: $("#add_annual_salary").val()
            };

            $.ajax({
                type: 'POST',
                url: '/save-checks-e5',
                data: data,
                headers: {
                    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                },
                dataType: 'JSON',
                success: function(data) {
                    if (data.success) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Added!',
                            text: 'Faculty Member was successfully added.',
                            confirmButtonColor: "#08BDE1",
                            confirmButtonText: 'Okay'
                        }).then((result) => {
                            if (result.isConfirmed) {
                                window.location.href = "{{route('checks-e5')}}";
                            }
                        });
                    }
                },
                error: function(response) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Error!',
                        text: 'An error occurred while saving. Please try again.',
                        confirmButtonColor: "#e74c43",
                        confirmButtonText: 'Okay'
                    });
                }
            });
        }
    });

    $(".edit-form").click(function(e) //EDIT faculty member
    {
        $('#AddModal').modal();
        $('#btnSubmit_checksE5').hide();
        $('#btnUpdate_checksE5').show();
        $('#AddModalLabel').text('Edit Faculty Member');

        var btnid = this.id;
        var id = btnid.replace('btnEdit.', '');
        var data = { id : id};

        $.ajax({
            type: 'GET',
            url: "/checks-e5-details",
            data: data,
            headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
            dataType: "JSON",
            success: function(data)
            {
                data.result.forEach((value, index, array) =>
                {
                    $('#id').val(id);
                    $('#add_last_name').val(value["last_name"]);
                    $('#add_first_name').val(value["first_name"]);
                    $('#add_middle_initial').val(value["middle_initial"]);
                    $('#add_member_type').val(value["member_type"]);
                    $('#add_fulltime_parttime').val(value["ftpt_code"]);
                    $('#add_gender').val(value["gender"]);
                    $('#add_highest_degree_attained').val(value["hda_code"]);
                    $('#add_primary_teaching_discipline').val(value["ptd_code"]);
                    $('#add_bachelors_degree').val(value["bachelor_code"]);
                    $('#add_masters_degree').val(value["masters_code"]);
                    $('#add_doctorate').val(value["doctorate_code"]);
                    $('#add_prof_license').val(value["pl_code"]);
                    $('#add_tenure').val(value["tenure"]);
                    $('#add_faculty_rank').val(value["fr_code"]);
                    $('#add_teaching_load').val(value["tl_code"]);
                    $('#add_subject_taught').val(value["subject_taught"]);
                    $('#add_annual_salary').val(value["as_code"]);
                });
            }
        })
    });

    $("#btnUpdate_checksE5").click(function(e) //UPDATE faculty member
    {
        e.preventDefault();

        var data = {
            id: $("#id").val(),
            last_name: $("#add_last_name").val(),
            first_name: $("#add_first_name").val(),
            middle_initial: $("#add_middle_initial").val(),
            member_type: $("#add_member_type").val(),
            ftpt_ID: $("#add_fulltime_parttime").val(),
            gender: $("#add_gender").val(),
            hda_ID: $("#add_highest_degree_attained").val(),
            programcode_ID_1: $("#add_primary_teaching_discipline").val(),
            programcode_ID_2: $("#add_bachelors_degree").val(),
            programcode_ID_3: $("#add_masters_degree").val(),
            programcode_ID_4: $("#add_doctorate").val(),
            pl_ID: $("#add_prof_license").val(),
            tenure: $("#add_tenure").val(),
            fr_ID: $("#add_faculty_rank").val(),
            tl_ID: $("#add_teaching_load").val(),
            subject_taught: $("#add_subject_taught").val(),
            as_ID: $("#add_annual_salary").val()
        };


        $.ajax({
            type: 'POST',
            url: '/update-checks-e5',
            data: data,
            headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
            dataType: 'JSON',
            success: function(data) {
                if (data.success) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Updated!',
                        text: 'Faculty Member was successfully updated.',
                        confirmButtonColor: "#08BDE1",
                        confirmButtonText: 'Okay'
                    }).then((result) => {
                        if (result.isConfirmed) {
                            window.location.href = "{{route('checks-e5')}}";
                        }
                    });
                }
            },
            error: function(xhr) {
                Swal.fire({
                    icon: 'error',
                    title: 'Error!',
                    text: 'An error occurred while updating. Please try again.',
                    confirmButtonColor: "#e74c43",
                    confirmButtonText: 'Okay'
                });
            }
        })
    });

    $(".delete-form").click(function(e) //DELETE faculty member
    {
        e.preventDefault();

        var btnid      = this.id;
        var id = btnid.replace('btnDelete.', '');
        var data = { id : id};

       Swal.fire({
            title: 'DELETE?',
            text: "Are you sure you want to delete the selected faculty member in Form-E5?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, Delete it!'
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: '/delete-checks-e5',
                    method: 'POST',
                    data: data,
                    headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
                    dataType: "JSON",
                    success: function(data)
                    {
                        if(data.success == true)
                        {
                            Swal.fire({
                                icon:'success',
                                title: 'Deleted!',
                                text: "Faculty Member was successfully Deleted.",
                                confirmButtonColor: "#08BDE1",
                                confirmButtonText: 'Okay'
                            }).then((result) => {
                                if (result.isConfirmed)
                                {
                                    window.location.href = "{{route('checks-e5')}}";
                                }
                            })
                        }
                    }
                });
            }
       });
    });
});

//Script for scholarship program
$(document).ready(function()
{

	$("#btnadd").click(function() //Add open Modal
	{
		$('#AddModal').modal('show');
		$('#btnsubmit_sprogram').show();
		$('#btnupdate_sprogram').hide();
	});

	$("#btnsubmit_sprogram").click(function () //fetch scholarship program per selected scholarship
	{
		var scholarship_id    	= $("#scholarship_id").val();
		var stype_id    		= $("#stype_id").val();
		var scholarship_code   	= $("#scholarship_code").val();
		var scholarship_program    = $("#scholarship_program").val();

		var data =  {
						scholarship_id 		: scholarship_id,
						stype_id 			: stype_id,
						scholarship_code 				: scholarship_code,
						scholarship_program 	: scholarship_program,
					};

		$.ajax({
			url: "/save-schol-program",
			method: 'POST',
			data: data,
			headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
			dataType: "JSON",
			success:function(data)
			{
				if(data.success == true)
				{
					Swal.fire({
								icon: 'success',
								title: "Save!",
								text: "Scholarship Program was successfully saved.",
								showCancelButton: false,
								allowOutsideClick: false,
								confirmButtonColor: "#08BDE1",
								confirmButtonText: "Okay",
							}).then((result) => {
							if (result.isConfirmed)
							{
							window.location.href = "{{route('osds-schol-scholprogram')}}";
						}
					})
				}
			}
		});
	});

	$(".sprogram-delete-form").click(function() //DELETE scholarship program policy per selected scholarship
	{
		var sp_id = 			$(this).closest('tr').find('td:eq(0)').html();
		var data =  { id : sp_id, };

		Swal.fire({
			icon: 'warning',
			title: "DELETE?",
			text: "Are you sure you want to delete the selected scholarship program?",
			showCancelButton: true,
			confirmButtonColor: "#E92A02",
			confirmButtonText: "Yes, Delete it!",
			}).then((result) => {
			if (result.isConfirmed)
			{
				$.ajax({
					url: "/delete-schol-program",
					method: 'POST',
					data: data,
					headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
					dataType: "JSON",
					success:function(data)
					{
						if(data.success == true)
						{
							Swal.fire({
								icon: 'success',
								title: "Deleted!",
								text: "Scholarship Program was successfully deleted.",
								showCancelButton: false,
								allowOutsideClick: false,
								confirmButtonColor: "#08BDE1",
								confirmButtonText: "Okay",
							}).then((result) => {
								if (result.isConfirmed)
								{
									window.location.href = "{{route('osds-schol-scholprogram')}}";
								}
							})
						}
					}
				})
			}
		});
	});

	$(".sprogram-edit-form").click(function()
	{
		$('#AddModal').modal('show');
		$('#btnsubmit_sprogram').hide();
		$('#btnupdate_sprogram').show();

		$('#sp_id').val($(this).closest('tr').find('td:eq(0)').html());
		$("#stype_id").val($(this).closest('tr').find('td:eq(1)').html());
		$('#scholarship_id').val($(this).closest('tr').find('td:eq(3)').html());
		$('#scholarship_code').val($(this).closest('tr').find('td:eq(6)').html());
		$('#scholarship_program').val($(this).closest('tr').find('td:eq(7)').html());

	});

	$("#btnupdate_sprogram").click(function() //UPDATE scholarship program policy per selected scholarship
	{
		var sp_id = 			$('#sp_id').val();
		var stype_id = 					$('#stype_id').val();
		var scholarship_id = 				$('#scholarship_id').val();
		var scholarship_code = 		$('#scholarship_code').val();
		var scholarship_program = 				$('#scholarship_program').val();

		var data =  {
			sp_id 					: sp_id,
			stype_id  	 			: stype_id,
			scholarship_id 			: scholarship_id,
			scholarship_code 		: scholarship_code,
			scholarship_program		: scholarship_program,
					};

		$.ajax({
			url: "/update-schol-program",
			method: 'POST',
			data: data,
			headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
			dataType: "JSON",
			success:function(data)
			{
				if(data.success == true)
				{
					Swal.fire({
								icon: 'success',
								title: "Updated!",
								text: "Scholarship Program was successfully updated.",
								showCancelButton: false,
								allowOutsideClick: false,
								confirmButtonColor: "#08BDE1",
								confirmButtonText: "Okay",
							}).then((result) => {
							if (result.isConfirmed)
							{
							window.location.href = "{{route('osds-schol-scholprogram')}}";
						}
					})
				}
			}
		});
	});
});

//Script for scholarship policy
$(document).ready(function()
{
	$("#btnadd").click(function() //Add open Modal
	{
		$('#AddModal').modal('show');
		$('#btnsubmit_spolicy').show();
		$('#btnupdate_spolicy').hide();
	});

	$("#add_scholarship").change(function () //fetch scholarship program per selected scholarship
	{
		$('#add_scholarship_program').empty();
		$("#add_scholarship_program").prepend('<option value="" disabled="disabled" selected>No Scholarship added</option>');

		var scholarship_id    = $("#add_scholarship").val();
		  var data =  { id : scholarship_id };

		$.ajax({
			url: "/fetch-scholarship-program",
			method: 'POST',
			data: data,
			headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
			dataType: "JSON",
			success:function(data)
			{
				$('#add_scholarship_program').empty();
				if(data.success == true)
				{
					data.result.forEach(function(value, index, arr)
					{
						$('#add_scholarship_program').append( new Option(value["scholarship_program"],value["sp_id"]) );
					});
				}
			}
		});
	});

	$("#filter_ay").change(function ()
	{
		var rex = new RegExp($('#filter_ay').val());
		if(rex =="/All/")
		{
			clearFilter();
		}
		else
		{
			$('.content').hide();
			$('.content').filter(function()
			{
				return rex.test($(this).text());
			}).show();
		}
	});

	$("#filter_scholarship").change(function ()
	{
		var rex = new RegExp($('#filter_scholarship').val());
		if(rex =="/All/")
		{
			clearFilter();
		}
		else
		{
			$('.content').hide();
			$('.content').filter(function()
			{
			return rex.test($(this).text());
			}).show();
		}
	});

	function clearFilter()
	{
		$("#filter_scholarship").val("All");
		$('.content').show();
	}

	$("#filter_ay").change(function ()
	{

	});

	$("#btnsubmit_spolicy").click(function()
	{
		var sp_id      			= $("#add_scholarship_program").val();
		var ay 					= $("#add_ay").val();
		var no_defernment  		= $("#add_defernment").val();
		var min_grade  			= $("#add_grade_new").val();
		var ongoing_min_grade  	= $("#add_grade_ongoing").val();
		var amount_per_year  	= $("#add_apy").val();
		var hei_type  			= $("#add_heitype").val();
		var fund  				= $("#add_fund").val();
		var slots  				= $("#add_slots").val();

		  var data =  {
						sp_id  	 			: sp_id,
						ay 					: ay,
						no_defernment 		: no_defernment,
						min_grade			: min_grade,
						ongoing_min_grade	: ongoing_min_grade,
						amount_per_year		: amount_per_year,
						hei_type			: hei_type,
						fund				: fund,
						slots				: slots,
					};

		$.ajax({
			url: "/save-schol-policy",
			method: 'POST',
			data: data,
			headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
			dataType: "JSON",
			success:function(data)
			{
				if(data.success == true)
				{
					Swal.fire({
								icon: 'success',
								title: "Save!",
								text: "Scholarship Program was successfully saved.",
								showCancelButton: false,
								allowOutsideClick: false,
								confirmButtonColor: "#08BDE1",
								confirmButtonText: "Okay",
							}).then((result) => {
							if (result.isConfirmed)
							{
							window.location.href = "{{route('osds-schol-policy')}}";
						}
					})
				}
			}
		});
	});

	$("#btnupdate_spolicy").click(function() //UPDATE scholarship program policy per selected scholarship
	{
		var spolicy_id = 			$('#spolicy_id').val();
		var ay = 					$('#add_ay').val();
		var sp_id = 				$('#add_scholarship_program').val();
		var scholarship_id = 		$('#add_scholarship').val();
		var hei_type = 				$('#add_heitype').val();
		var min_grade = 			$('#add_grade_new').val();
		var ongoing_min_grade = 	$('#add_grade_ongoing').val();
		var fund = 					$('#add_fund').val();
		var amount_per_year = 		$('#add_apy').val();
		var no_defernment =			$('#add_defernment').val();
		var slots =					$('#add_slots').val();

		var data =  {
						spolicy_id 				: spolicy_id,
						ay  	 				: ay,
						sp_id 					: sp_id,
						scholarship_id 			: scholarship_id,
						hei_type				: hei_type,
						min_grade				: min_grade,
						ongoing_min_grade		: ongoing_min_grade,
						fund					: fund,
						amount_per_year			: amount_per_year,
						no_defernment			: no_defernment,
						slots					: slots,
					};


		$.ajax({
			url: "/update-schol-policy",
			method: 'POST',
			data: data,
			headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
			dataType: "JSON",
			success:function(data)
			{
				if(data.success == true)
				{
					Swal.fire({
								icon: 'success',
								title: "Updated!",
								text: "Scholarship Policy was successfully updated.",
								showCancelButton: false,
								allowOutsideClick: false,
								confirmButtonColor: "#08BDE1",
								confirmButtonText: "Okay",
							}).then((result) => {
							if (result.isConfirmed)
							{
							window.location.href = "{{route('osds-schol-policy')}}";
						}
					})
				}
			}
		});
	});

	$(".policy-delete-form").click(function() //DELETE scholarship program policy per selected scholarship
	{
		var spolicy_id = 			$(this).closest('tr').find('td:eq(0)').html();
		var data =  { id : spolicy_id, };

		Swal.fire({
			icon: 'warning',
			title: "DELETE?",
			text: "Are you sure you want to delete the selected scholarship program policy?",
			showCancelButton: true,
			confirmButtonColor: "#E92A02",
			confirmButtonText: "Yes, Delete it!",
			}).then((result) => {
			if (result.isConfirmed)
			{
				$.ajax({
					url: "/delete-schol-policy",
					method: 'POST',
					data: data,
					headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
					dataType: "JSON",
					success:function(data)
					{
						if(data.success == true)
						{
							Swal.fire({
								icon: 'success',
								title: "Deleted!",
								text: "Scholarship Program was successfully deleted.",
								showCancelButton: false,
								allowOutsideClick: false,
								confirmButtonColor: "#08BDE1",
								confirmButtonText: "Okay",
							}).then((result) => {
								if (result.isConfirmed)
								{
									window.location.href = "{{route('osds-schol-policy')}}";
								}
							})
						}
					}
				})
			}
		});
	});

	$(".policy-edit-form").click(function()
	{
		$('#AddModal').modal('show');
		$('#btnsubmit_spolicy').hide();
		$('#btnupdate_spolicy').show();

		var spolicy_id = 			$(this).closest('tr').find('td:eq(0)').html();
		var ay = 					$(this).closest('tr').find('td:eq(1)').html();
		var sp_id = 				$(this).closest('tr').find('td:eq(2)').html();
		var scholarship_id = 		$(this).closest('tr').find('td:eq(3)').html();
		var scholarship_code = 		$(this).closest('tr').find('td:eq(4)').html();
		var code = 					$(this).closest('tr').find('td:eq(5)').html();
		var scholarship_program = 	$(this).closest('tr').find('td:eq(6)').html();
		var hei_type = 				$(this).closest('tr').find('td:eq(7)').html();
		var min_grade = 			$(this).closest('tr').find('td:eq(8)').html();
		var ongoing_min_grade = 	$(this).closest('tr').find('td:eq(9)').html();
		var fund = 					$(this).closest('tr').find('td:eq(10)').html();
		var amount_per_year = 		$(this).closest('tr').find('td:eq(11)').html();
		//var status =				$(this).closest('tr').find('td:eq(12)').html();
		var no_defernment =			$(this).closest('tr').find('td:eq(12)').html();
		var slots =					$(this).closest('tr').find('td:eq(13)').html();

		$('#spolicy_id').val(spolicy_id);
		$("#add_scholarship").val(scholarship_id).trigger('change');
		$('#add_scholarship').trigger('change');
		$('#add_scholarship_program').val(sp_id);
		$('#add_ay').val(ay);
		$('#add_defernment').val(no_defernment);
		$('#add_grade_new').val(min_grade);
		$('#add_grade_ongoing').val(ongoing_min_grade);
		$('#add_apy').val(amount_per_year);
		$('#add_heitype').val(hei_type);
		$('#add_fund').val(fund);
		$('#add_slots').val(slots);

	});

});

//Script for scholarship
$(document).ready(function() {
    $("#btnsubmit").click(function()
    {
        var unit_id      		= $("#add_unit_id").val();
        var scholarship 		= $("#add_Scholarship").val();
        var scholarship_code  	= $("#add_code").val();
        var eligible  			= $("#add_eligible").val();

          var data =  {
                        unit_id  	 		: unit_id,
                        scholarship 		: scholarship,
                        scholarship_code 	: scholarship_code,
                        eligible			: eligible,
                    };

        $.ajax({
            url: "/save-scholarship",
            method: 'POST',
            data: data,
            headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
            dataType: "JSON",
            success:function(data)
            {
                if(data.success == true)
                {
                    Swal.fire({
                                icon: 'success',
                                title: "Save!",
                                text: "Scholarship Program was successfully saved.",
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: "#08BDE1",
                                confirmButtonText: "Okay",
                            }).then((result) => {
                            if (result.isConfirmed)
                            {
                            window.location.href = "{{route('osds-schol-program')}}";
                        }
                    })
                }
            }
        });
    });

    $("#btnupdate").click(function()
    {
        var id      			= $("#schol_edit_id").val();
        var unit_id      		= $("#edit_unit_id").val();
        var scholarship 		= $("#edit_Scholarship").val();
        var scholarship_code  	= $("#edit_code").val();
        var eligible  			= $("#edit_eligible").val();

          var data =  {
                        id 					: id,
                        unit_id  	 		: unit_id,
                        scholarship 		: scholarship,
                        scholarship_code 	: scholarship_code,
                        eligible			: eligible,
                    };

        $.ajax({
            url: "/edit-scholarship",
            method: 'POST',
            data: data,
            headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
            dataType: "JSON",
            success:function(data)
            {
                if(data.success == true)
                {
                    Swal.fire({
                                icon: 'success',
                                title: "Updated!",
                                text: "Scholarship Program was successfully updated.",
                                showCancelButton: false,
                                allowOutsideClick: false,
                                confirmButtonColor: "#08BDE1",
                                confirmButtonText: "Okay",
                            }).then((result) => {
                            if (result.isConfirmed)
                            {
                            window.location.href = "{{route('osds-schol-program')}}";
                        }
                    })
                }
            }
        });
    });

    $(".edit-form").click(function()
    {
        var btnid      = this.id;
        var id = btnid.replace('btnedit.','');
        var data = { id : id};

        $.ajax({
        url: "/scholarship-details",
        method: 'POST',
        data: data,
        headers: {'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')},
        dataType: "JSON",
        success:function(data)
        {
            data.result.forEach(function(value, index, arr)
            {
                $('#schol_edit_id').val(id);
                $('#edit_unit_id').val(value["unit_id"]);
                $('#edit_Scholarship').val(value["scholarship"]);
                $('#edit_code').val(value["scholarship_code"]);
                $('#edit_eligible').val(value["eligible"]);
            });
        }
        });
    });
});
	</script>
<body>

















<!-- Adding a Faculty Member -->
<div class="modal fade" id="AddModal" tabindex="-1" aria-labelledby="AddModalLabel">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="AddModalLabel">Add Faculty Member</h5>
                <button type="button" class="btn-close close-faculty-modal" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form class="needs-validation" id="formAddFaculty" method="POST" novalidate>
                <div class="modal-body">
                    @csrf
                    <div class="col-xl-auto">
                        <div class="nav-align-top mb-4">
                            <ul class="nav nav-pills mb-4" role="tablist">
                                <li class="nav-item">
                                    <button
                                    type="button"
                                    class="nav-link active"
                                    role="tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#navs-top-profile"
                                    aria-controls="navs-top-profile"
                                    aria-selected="true">
                                    Faculty Profile
                                    </button>
                                </li>
                                <li class="nav-item">
                                    <button
                                    type="button"
                                    class="nav-link"
                                    role="tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#navs-top-educational_background"
                                    aria-controls="navs-top-educational_background"
                                    aria-selected="true">
                                    Educational Background
                                    </button>
                                </li>
                                <li class="nav-item">
                                    <button
                                    type="button"
                                    class="nav-link"
                                    role="tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#navs-top-subject_taught"
                                    aria-controls="navs-top-subject_taught"
                                    aria-selected="true">
                                    Subject Taught
                                    </button>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane fade show active" id="navs-top-profile" role="tabpanel">
                                    <input type="hidden" id="id" name="id">
                                    <!-- Name of Faculty -->
                                    <div class="row">
                                        <label class="mb-3" for="form-label">Name of Faculty Member&nbsp;<span><i>(Last Name, First Name Middle Initial)</i></span></label>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_last_name">Last Name</label>
                                                <div class="input-group has-validation mb-1">
                                                    <input oninput="this.value = this.value.toUpperCase()" type="text"
                                                            class="form-control required-field"
                                                            id="add_last_name" name="last_name"
                                                            placeholder="DELA CRUZ" required>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_first_name">First Name</label>
                                                <div class="input-group mb-1">
                                                    <input oninput="this.value = this.value.toUpperCase()" type="text"
                                                            class="form-control required-field"
                                                            id="add_first_name" name="first_name"
                                                            placeholder="JUAN" required>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_middle_initial">Middle Initial</label>
                                                <div class="input-group mb-1">
                                                    <input oninput="this.value = this.value.toUpperCase()" type="text"
                                                            class="form-control required-field"
                                                            id="add_middle_initial" name="middle_initial"
                                                            placeholder="V" required>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Type of Employment -->
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_member_type">Member Type</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_member_type" name="member_type" required>
                                                        <option selected="true" disabled="disabled">Select Member Type</option>
                                                        <option value="0">None</option>
                                                        <option value="1">Faculty</option>
                                                        <option value="2">Non Faculty</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_fulltime_parttime">Type of Employment</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_fulltime_parttime" name="ftpt_ID" required>
                                                        <option selected="true" disabled="disabled">Select Type of Employment</option>
                                                        @foreach ($ft_pt as $ftpt_code)
                                                            <option value="{{$ftpt_code->ID}}">{{$ftpt_code->description}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_gender">Gender</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_gender" name="gender" required>
                                                        <option selected="true" disabled="disabled">Select Gender</option>
                                                        <option value="1">Male</option>
                                                        <option value="2">Female</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Primary Teaching Discipline -->
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_primary_teaching_discipline">Primary Teaching Discipline</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_primary_teaching_discipline" name="programcode_ID_1">
                                                        <option selected="true" disabled="disabled">Select Degree</option>
                                                        @foreach ($program_with_code as $program_code)
                                                        <option value="{{$program_code->ID}}">{{$program_code->Program}}&nbsp;{{$program_code->Major}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="navs-top-educational_background" role="tabpanel">
                                    <div class="row">
                                        <label class="mb-3" for="form-label">Educational Credential Earned</label>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_highest_degree_attained">Highest Degree Attained</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_highest_degree_attained" name="hda_ID" required>
                                                        <option selected="true" disabled="disabled">Select Highest Degree Attained</option>
                                                        @foreach ($highest_degree_attained as $hda_code)
                                                        <option value="{{$hda_code->ID}}">{{$hda_code->description}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_bachelors_degree">Bachelor's Degree</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_bachelors_degree" name="programcode_ID_2">
                                                        <option selected="true" disabled="disabled">Select Degree</option>
                                                        @foreach ($program_with_code as $program_code)
                                                        <option value="{{$program_code->ID}}">{{$program_code->Program}}&nbsp;{{$program_code->Major}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_masters_degree">Master's Degree</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_masters_degree" name="programcode_ID_3">
                                                        <option selected="true" disabled="disabled">Select Degree</option>
                                                        @foreach ($program_with_code as $program_code)
                                                        <option value="{{$program_code->ID}}">{{$program_code->Program}}&nbsp;{{$program_code->Major}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_doctorate">Doctorate</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_doctorate" name="programcode_ID_4">
                                                        <option selected="true" disabled="disabled">Select Degree</option>
                                                        @foreach ($program_with_code as $program_code)
                                                        <option value="{{$program_code->ID}}">{{$program_code->Program}}&nbsp;{{$program_code->Major}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="navs-top-subject_taught" role="tabpanel">
                                    <div class="row">
                                        <div class="col mb-3">
                                            <label class="form-label" for="add_prof_license">Professional License</label>
                                            <div class="input-group mb-1">
                                                <select class="form-select required-field" id="add_prof_license" name="pl_ID" required>
                                                    <option selected="true" disabled="disabled">Select Professional License</option>
                                                    @foreach ($prof_license as $pl_code)
                                                        <option value="{{$pl_code->ID}}">{{$pl_code->description}}</option>
                                                    @endforeach
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <label class="form-label" for="add_tenure">Tenure of Employment</label>
                                            <div class="input-group mb-1">
                                                <select class="form-select required-field" id="add_tenure" name="tenure" required>
                                                    <option selected="true" disabled="disabled">Select Tenure</option>
                                                    <option value="1">Permanent</option>
                                                    <option value="2">Probationary</option>
                                                    <option value="3">Casual</option>
                                                    <option value="4">Contractual</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_faculty_rank">Faculty Rank</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_faculty_rank" name="fr_ID" required>
                                                        <option selected="true" disabled="disabled">Select Faculty Rank</option>
                                                        @foreach ($faculty_rank as $fr_code)
                                                            <option value="{{$fr_code->ID}}">{{$fr_code->description}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_teaching_load">Teaching Load</label>
                                                <div class="input-group mb-1">
                                                    <select name="tl_ID" id="add_teaching_load" class="form-select required-field" required>
                                                        <option selected="true" disabled="disabled">Select Teaching Load</option>
                                                        @foreach ($teaching_load as $tl_code)
                                                            <option value="{{$tl_code->ID}}">{{$tl_code->description}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_subject_taught">Subject Taught</label>
                                                <div class="input-group mb-1">
                                                    <textarea class="form-control required-field me-3" name="subject_taught" id="add_subject_taught" placeholder="Enter subject taught"></textarea>
                                                    <button type="button" class="btn btn-primary btn-sm" data-bs-toggle="modal"
                                                    data-bs-target="#AddSubjectModal"><i class="ri-edit-2-line" style="font-size: 14px"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="add_annual_salary">Annual Salary</label>
                                                <div class="input-group mb-1">
                                                    <select name="as_ID" id="add_annual_salary" class="form-select required-field" required>
                                                        <option selected="true" disabled="disabled">Select Annual Salary</option>
                                                        @foreach ($annual_salary as $as_code)
                                                            <option value="{{$as_code->ID}}">{{$as_code->description}}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Submit Button -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close-faculty-modal" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" id="btnSubmit_checksE5">Submit</button>
                    <button id="btnUpdate_checksE5" type="submit" class="btn btn-primary">Update changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal for adding and editing subjects -->
<div class="modal fade" id="AddSubjectModal" tabindex="-1" aria-labelledby="AddSubjectLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="AddSubjectLabel">Subject Taught</h5>
                <button type="button" class="btn-close" data-bs-target="#AddModal" data-bs-toggle="modal"></button>
            </div>
            <div class="modal-body">
                <div class="d-flex flex-row mb-3">
                    <input type="text" id="subjectTaught" placeholder="Enter subject taught" class="form-control me-2" required>
                    <input type="button" class="btn btn-outline-primary me-2" id="addEntry" value="Add Entry">
                </div>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Subject Taught</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="insertionPoint">
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="saveData" data-bs-target="#AddModal" data-bs-toggle="modal">Save</button>
            </div>
        </div>
    </div>
</div>

<!-- EDIT subject taught modal -->
<div class="modal fade" id="EditSubjectModal" tabindex="-1" aria-labelledby="EditSubjectLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="EditSubjectLabel">Edit Subject Taught</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="d-flex flex-row">
                    <input type="text" id="editSubjectInput" placeholder="Edit subject taught" class="form-control me-2 required-field" required>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="saveEditedSubject" data-bs-target="#AddSubjectModal" data-bs-toggle="modal">Save</button>
            </div>
        </div>
    </div>
</div>
<script>
    let subjectList = [];
    let editingIndex = -1;  // To track which subject is being edited

    // Insert the subject into the table and update the list
    function insertData() {
        const subjectTaught = $.trim($('#subjectTaught').val());

        if (subjectTaught) {
            // Add subject to list
            subjectList.push(subjectTaught);

            // Update the table dynamically
            updateTable();

            // Clear the input field
            $('#subjectTaught').val('');
        }
    }

    function clearSubjects() {
        subjectList = [];  // Clear the subject list
        updateTable();  // Update the table to reflect the changes
    }

    // Update the table with subjects stored in subjectList
    function updateTable() {
        const tableBody = $('#insertionPoint');
        tableBody.empty();  // Clear existing rows

        $.each(subjectList, function(index, subject) {
            tableBody.append(`
                <tr>
                    <td>${index + 1}</td>
                    <td>${subject}</td>
                    <td>
                        <button class="btn btn-warning btn-sm edit-btn" data-index="${index}">Edit</button>
                        <button class="btn btn-danger btn-sm delete-btn" data-index="${index}">Delete</button>
                    </td>
                </tr>
            `);
        });
    }

    // Open the edit modal and populate it with the selected subject
    function openEditModal(index) {
        editingIndex = index;
        const subject = subjectList[index];

        // Set the value of the input in the Edit Modal
        $('#editSubjectInput').val(subject);

        // Show the Edit Modal
        $('#EditSubjectModal').modal('show');
    }

    // Save the edited subject back to the list and update the table
    function saveEditedSubject() {
        const editedSubject = $.trim($('#editSubjectInput').val());

        if (editedSubject && editingIndex !== -1) {
            subjectList[editingIndex] = editedSubject;

            // Update the table with the edited data
            updateTable();

            // Reset the editing index
            editingIndex = -1;

            // Close the Edit Modal and re-open AddSubjectModal
            $('#EditSubjectModal').modal('hide');
            $('#AddSubjectModal').modal('show');  // Re-open AddSubjectModal
        }
    }

    // Function to remove a subject from the list
    function deleteSubject(index) {
        subjectList.splice(index, 1);
        updateTable();
    }

    // Save the subjects and concatenate them in the textarea
    function saveData() {
        const textarea = $('#add_subject_taught');

        // Concatenate subjects with a comma and update textarea
        textarea.val(subjectList.join(', '));
    }

    // Load the subjects from the textarea into the subjectList and update the table
    function loadSubjectsFromTextarea() {
        const textareaValue = $('#add_subject_taught').val();
        subjectList = textareaValue ? textareaValue.split(', ').map(item => $.trim(item)) : [];
        updateTable();
    }

    // Event Handlers
    $(document).on('click', '#addEntry', function() {
        insertData();
    });

    $(document).on('click', '#saveData', function() {
        saveData();
    });

    $(document).on('click', '.edit-btn', function() {
        const index = $(this).data('index');
        openEditModal(index);
    });

    $(document).on('click', '.delete-btn', function() {
        const index = $(this).data('index');
        deleteSubject(index);
    });

    $(document).on('click', '#saveEditedSubject', function() {
        saveEditedSubject();
    });

    // When the modal is opened, load subjects from the textarea and display them in the table
    $('#AddSubjectModal').on('show.bs.modal', function () {
        loadSubjectsFromTextarea();
    });

    // After hiding EditSubjectModal, reopen AddSubjectModal
    $('#EditSubjectModal').on('hidden.bs.modal', function () {
        $('#AddSubjectModal').modal('show');
    });
</script>


<div class="tab-pane fade" id="navs-top-program" role="tabpanel">
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="GPR_ID">Program</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_program" name="GPR_ID" required>
                                                        <option selected="true" disabled="disabled">Select Program</option>
                                                        @foreach ($gpr_level as $item)
                                                            <option value="{{ $item->ID }}">{{ $item->Discipline }}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="Major">Major</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_major" name="Major" required>
                                                        <option selected="true" disabled="disabled">Select Major</option>
                                                        @foreach ($gpr_level as $item)
                                                            <option value="{{ $item->ID }}">{{ $item->Major }}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="Authority_number">Authority Number</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_authority_number" name="Authority_number" required>
                                                        <option selected="true" disabled="disabled">Select Authority Number</option>
                                                        @foreach ($gpr_level as $item)
                                                            <option value="{{ $item->ID }}">
                                                                @if ($item->GPR == 'GP')
                                                                    <label>GOVERNMENT PERMIT</label>
                                                                @elseif ($item->GPR == 'GR')
                                                                    <label>GOVERNMENT RECOGNITON</label>
                                                                @elseif ($item->GPR == 'BTR')
                                                                    <label>BOARD OF TRUSTEES RESOLUTION</label>
                                                                @endif
                                                                <label>No.</label>
                                                                <label>{{ $item->GP_GR_No }}</label>
                                                            </option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div><div class="col mb-3">
                                            <div class="box">
                                                <label class="form-label" for="Year_granted">Year Granted</label>
                                                <div class="input-group mb-1">
                                                    <select class="form-select required-field" id="add_year_granted" name="Year_granted" required>
                                                        <option selected="true" disabled="disabled">Select Year Granted</option>
                                                        @foreach ($gpr_level as $item)
                                                            <option value="{{ $item->ID }}">{{ $item->Date }}</option>
                                                        @endforeach
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>





    // Sorting function
    $(document).on('click', '.sorting', function() {
        var column_name = $(this).data('column_name');
        var order_type = $(this).data('sorting_type');
        var reverse_order = '';
        var icon;

        if (order_type === 'asc') {
            $(this).data('sorting_type', 'desc');
            reverse_order = 'desc';
            clear_icon();
            icon = `<span class="bi bi-caret-down-fill"></span>`;
        } else if (order_type === 'desc') {
            $(this).data('sorting_type', 'asc');
            reverse_order = 'asc';
            clear_icon();
            icon = `<span class="bi bi-caret-up-fill"></span>`;
        }

        $('#' + column_name + '_icon').html(icon);

        var prc_page = 1;
        var program_level = $('#program-level').val();
        var prc_search = $('#prc-search').val();
        fetch_data(prc_page, prc_search, program_level, reverse_order || 'asc', column_name);

        let url = '?page=1';
        if (prc_search.length > 0) {
            url += '&search=' + encodeURIComponent(prc_search);
        }
        if (program_level) {
            url += '&level=' + program_level;
        }
        history.pushState(null, '', url + "&sortby=" + (column_name || 'Student_ID') + "&sorttype=" + (reverse_order || 'asc'));
    });
